{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":8,"column":0,"index":138},"end":{"line":8,"column":31,"index":169}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":10,"column":0,"index":171},"end":{"line":13,"column":36,"index":294}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":10,"column":0,"index":171},"end":{"line":13,"column":36,"index":294}}],"key":"y9eQQdj9MvCs7akL60igi3d/dsI="}},{"name":"./useOnPreventRemove","data":{"asyncType":null,"locs":[{"start":{"line":16,"column":0,"index":405},"end":{"line":16,"column":79,"index":484}}],"key":"bjcmesK2D9GMO5sMa7zUpDYJFA8="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnAction;\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[0], \"react\"));\n  var _NavigationBuilderContext = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"./NavigationBuilderContext\"));\n  var _useOnPreventRemove = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[3], \"./useOnPreventRemove\"));\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n  function useOnAction(_ref) {\n    var router = _ref.router,\n      getState = _ref.getState,\n      setState = _ref.setState,\n      key = _ref.key,\n      actionListeners = _ref.actionListeners,\n      beforeRemoveListeners = _ref.beforeRemoveListeners,\n      routerConfigOptions = _ref.routerConfigOptions,\n      emitter = _ref.emitter;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n      onActionParent = _React$useContext.onAction,\n      onRouteFocusParent = _React$useContext.onRouteFocus,\n      addListenerParent = _React$useContext.addListener,\n      onDispatchAction = _React$useContext.onDispatchAction;\n    var routerConfigOptionsRef = React.useRef(routerConfigOptions);\n    React.useEffect(function () {\n      routerConfigOptionsRef.current = routerConfigOptions;\n    });\n    var onAction = React.useCallback(function (action) {\n      var visitedNavigators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();\n      var state = getState();\n      if (visitedNavigators.has(state.key)) {\n        return false;\n      }\n      visitedNavigators.add(state.key);\n      if (typeof action.target !== 'string' || action.target === state.key) {\n        var result = router.getStateForAction(state, action, routerConfigOptionsRef.current);\n        result = result === null && action.target === state.key ? state : result;\n        if (result !== null) {\n          onDispatchAction(action, state === result);\n          if (state !== result) {\n            var isPrevented = (0, _useOnPreventRemove.shouldPreventRemove)(emitter, beforeRemoveListeners, state.routes, result.routes, action);\n            if (isPrevented) {\n              return true;\n            }\n            setState(result);\n          }\n          if (onRouteFocusParent !== undefined) {\n            var shouldFocus = router.shouldActionChangeFocus(action);\n            if (shouldFocus && key !== undefined) {\n              onRouteFocusParent(key);\n            }\n          }\n          return true;\n        }\n      }\n      if (onActionParent !== undefined) {\n        if (onActionParent(action, visitedNavigators)) {\n          return true;\n        }\n      }\n      for (var i = actionListeners.length - 1; i >= 0; i--) {\n        var listener = actionListeners[i];\n        if (listener(action, visitedNavigators)) {\n          return true;\n        }\n      }\n      return false;\n    }, [actionListeners, beforeRemoveListeners, emitter, getState, key, onActionParent, onDispatchAction, onRouteFocusParent, router, setState]);\n    (0, _useOnPreventRemove.default)({\n      getState: getState,\n      emitter: emitter,\n      beforeRemoveListeners: beforeRemoveListeners\n    });\n    React.useEffect(function () {\n      return addListenerParent == null ? void 0 : addListenerParent('action', onAction);\n    }, [addListenerParent, onAction]);\n    return onAction;\n  }\n});","lineCount":80,"map":[[6,2,8,0],[7,2,10,0],[8,2,16,0],[9,2,16,79],[10,2,16,79],[11,2,38,15],[11,11,38,24,"useOnAction"],[11,22,38,35],[11,29,47,12],[12,4,47,12],[12,8,39,2,"router"],[12,14,39,8],[12,22,39,2,"router"],[12,28,39,8],[13,6,40,2,"getState"],[13,14,40,10],[13,22,40,2,"getState"],[13,30,40,10],[14,6,41,2,"setState"],[14,14,41,10],[14,22,41,2,"setState"],[14,30,41,10],[15,6,42,2,"key"],[15,9,42,5],[15,17,42,2,"key"],[15,20,42,5],[16,6,43,2,"actionListeners"],[16,21,43,17],[16,29,43,2,"actionListeners"],[16,44,43,17],[17,6,44,2,"beforeRemoveListeners"],[17,27,44,23],[17,35,44,2,"beforeRemoveListeners"],[17,56,44,23],[18,6,45,2,"routerConfigOptions"],[18,25,45,21],[18,33,45,2,"routerConfigOptions"],[18,52,45,21],[19,6,46,2,"emitter"],[19,13,46,9],[19,21,46,2,"emitter"],[19,28,46,9],[20,4,48,2],[20,28,53,6,"React"],[20,33,53,11],[20,34,53,12,"useContext"],[20,44,53,22],[20,45,53,23,"NavigationBuilderContext"],[20,78,53,47],[20,79,53,48],[21,6,49,14,"onActionParent"],[21,20,49,28],[21,41,49,4,"onAction"],[21,49,49,12],[22,6,50,18,"onRouteFocusParent"],[22,24,50,36],[22,45,50,4,"onRouteFocus"],[22,57,50,16],[23,6,51,17,"addListenerParent"],[23,23,51,34],[23,44,51,4,"addListener"],[23,55,51,15],[24,6,52,4,"onDispatchAction"],[24,22,52,20],[24,43,52,4,"onDispatchAction"],[24,59,52,20],[25,4,55,2],[25,8,55,8,"routerConfigOptionsRef"],[25,30,55,30],[25,33,56,4,"React"],[25,38,56,9],[25,39,56,10,"useRef"],[25,45,56,16],[25,46,56,38,"routerConfigOptions"],[25,65,56,57],[25,66,56,58],[26,4,58,2,"React"],[26,9,58,7],[26,10,58,8,"useEffect"],[26,19,58,17],[26,20,58,18],[26,32,58,24],[27,6,59,4,"routerConfigOptionsRef"],[27,28,59,26],[27,29,59,27,"current"],[27,36,59,34],[27,39,59,37,"routerConfigOptions"],[27,58,59,56],[28,4,60,2],[28,5,60,3],[28,6,60,4],[29,4,62,2],[29,8,62,8,"onAction"],[29,16,62,16],[29,19,62,19,"React"],[29,24,62,24],[29,25,62,25,"useCallback"],[29,36,62,36],[29,37,63,4],[29,47,64,6,"action"],[29,53,64,30],[29,55,66,9],[30,6,66,9],[30,10,65,6,"visitedNavigators"],[30,27,65,36],[30,98,65,39],[30,102,65,43,"Set"],[30,105,65,46],[30,107,65,56],[31,6,67,6],[31,10,67,12,"state"],[31,15,67,17],[31,18,67,20,"getState"],[31,26,67,28],[31,28,67,30],[32,6,71,6],[32,10,71,10,"visitedNavigators"],[32,27,71,27],[32,28,71,28,"has"],[32,31,71,31],[32,32,71,32,"state"],[32,37,71,37],[32,38,71,38,"key"],[32,41,71,41],[32,42,71,42],[32,44,71,44],[33,8,72,8],[33,15,72,15],[33,20,72,20],[34,6,73,6],[35,6,75,6,"visitedNavigators"],[35,23,75,23],[35,24,75,24,"add"],[35,27,75,27],[35,28,75,28,"state"],[35,33,75,33],[35,34,75,34,"key"],[35,37,75,37],[35,38,75,38],[36,6,77,6],[36,10,77,10],[36,17,77,17,"action"],[36,23,77,23],[36,24,77,24,"target"],[36,30,77,30],[36,35,77,35],[36,43,77,43],[36,47,77,47,"action"],[36,53,77,53],[36,54,77,54,"target"],[36,60,77,60],[36,65,77,65,"state"],[36,70,77,70],[36,71,77,71,"key"],[36,74,77,74],[36,76,77,76],[37,8,78,8],[37,12,78,12,"result"],[37,18,78,18],[37,21,78,21,"router"],[37,27,78,27],[37,28,78,28,"getStateForAction"],[37,45,78,45],[37,46,79,10,"state"],[37,51,79,15],[37,53,80,10,"action"],[37,59,80,16],[37,61,81,10,"routerConfigOptionsRef"],[37,83,81,32],[37,84,81,33,"current"],[37,91,81,40],[37,92,82,9],[38,8,86,8,"result"],[38,14,86,14],[38,17,87,10,"result"],[38,23,87,16],[38,28,87,21],[38,32,87,25],[38,36,87,29,"action"],[38,42,87,35],[38,43,87,36,"target"],[38,49,87,42],[38,54,87,47,"state"],[38,59,87,52],[38,60,87,53,"key"],[38,63,87,56],[38,66,87,59,"state"],[38,71,87,64],[38,74,87,67,"result"],[38,80,87,73],[39,8,89,8],[39,12,89,12,"result"],[39,18,89,18],[39,23,89,23],[39,27,89,27],[39,29,89,29],[40,10,90,10,"onDispatchAction"],[40,26,90,26],[40,27,90,27,"action"],[40,33,90,33],[40,35,90,35,"state"],[40,40,90,40],[40,45,90,45,"result"],[40,51,90,51],[40,52,90,52],[41,10,92,10],[41,14,92,14,"state"],[41,19,92,19],[41,24,92,24,"result"],[41,30,92,30],[41,32,92,32],[42,12,93,12],[42,16,93,18,"isPrevented"],[42,27,93,29],[42,30,93,32],[42,34,93,32,"shouldPreventRemove"],[42,73,93,51],[42,75,94,14,"emitter"],[42,82,94,21],[42,84,95,14,"beforeRemoveListeners"],[42,105,95,35],[42,107,96,14,"state"],[42,112,96,19],[42,113,96,20,"routes"],[42,119,96,26],[42,121,97,14,"result"],[42,127,97,20],[42,128,97,21,"routes"],[42,134,97,27],[42,136,98,14,"action"],[42,142,98,20],[42,143,99,13],[43,12,101,12],[43,16,101,16,"isPrevented"],[43,27,101,27],[43,29,101,29],[44,14,102,14],[44,21,102,21],[44,25,102,25],[45,12,103,12],[46,12,105,12,"setState"],[46,20,105,20],[46,21,105,21,"result"],[46,27,105,27],[46,28,105,28],[47,10,106,10],[48,10,108,10],[48,14,108,14,"onRouteFocusParent"],[48,32,108,32],[48,37,108,37,"undefined"],[48,46,108,46],[48,48,108,48],[49,12,111,12],[49,16,111,18,"shouldFocus"],[49,27,111,29],[49,30,111,32,"router"],[49,36,111,38],[49,37,111,39,"shouldActionChangeFocus"],[49,60,111,62],[49,61,111,63,"action"],[49,67,111,69],[49,68,111,70],[50,12,113,12],[50,16,113,16,"shouldFocus"],[50,27,113,27],[50,31,113,31,"key"],[50,34,113,34],[50,39,113,39,"undefined"],[50,48,113,48],[50,50,113,50],[51,14,114,14,"onRouteFocusParent"],[51,32,114,32],[51,33,114,33,"key"],[51,36,114,36],[51,37,114,37],[52,12,115,12],[53,10,116,10],[54,10,118,10],[54,17,118,17],[54,21,118,21],[55,8,119,8],[56,6,120,6],[57,6,122,6],[57,10,122,10,"onActionParent"],[57,24,122,24],[57,29,122,29,"undefined"],[57,38,122,38],[57,40,122,40],[58,8,124,8],[58,12,124,12,"onActionParent"],[58,26,124,26],[58,27,124,27,"action"],[58,33,124,33],[58,35,124,35,"visitedNavigators"],[58,52,124,52],[58,53,124,53],[58,55,124,55],[59,10,125,10],[59,17,125,17],[59,21,125,21],[60,8,126,8],[61,6,127,6],[62,6,130,6],[62,11,130,11],[62,15,130,15,"i"],[62,16,130,16],[62,19,130,19,"actionListeners"],[62,34,130,34],[62,35,130,35,"length"],[62,41,130,41],[62,44,130,44],[62,45,130,45],[62,47,130,47,"i"],[62,48,130,48],[62,52,130,52],[62,53,130,53],[62,55,130,55,"i"],[62,56,130,56],[62,58,130,58],[62,60,130,60],[63,8,131,8],[63,12,131,14,"listener"],[63,20,131,22],[63,23,131,25,"actionListeners"],[63,38,131,40],[63,39,131,41,"i"],[63,40,131,42],[63,41,131,43],[64,8,133,8],[64,12,133,12,"listener"],[64,20,133,20],[64,21,133,21,"action"],[64,27,133,27],[64,29,133,29,"visitedNavigators"],[64,46,133,46],[64,47,133,47],[64,49,133,49],[65,10,134,10],[65,17,134,17],[65,21,134,21],[66,8,135,8],[67,6,136,6],[68,6,138,6],[68,13,138,13],[68,18,138,18],[69,4,139,4],[69,5,139,5],[69,7,140,4],[69,8,141,6,"actionListeners"],[69,23,141,21],[69,25,142,6,"beforeRemoveListeners"],[69,46,142,27],[69,48,143,6,"emitter"],[69,55,143,13],[69,57,144,6,"getState"],[69,65,144,14],[69,67,145,6,"key"],[69,70,145,9],[69,72,146,6,"onActionParent"],[69,86,146,20],[69,88,147,6,"onDispatchAction"],[69,104,147,22],[69,106,148,6,"onRouteFocusParent"],[69,124,148,24],[69,126,149,6,"router"],[69,132,149,12],[69,134,150,6,"setState"],[69,142,150,14],[69,143,151,5],[69,144,152,3],[70,4,154,2],[70,8,154,2,"useOnPreventRemove"],[70,35,154,20],[70,37,154,21],[71,6,155,4,"getState"],[71,14,155,12],[71,16,155,4,"getState"],[71,24,155,12],[72,6,156,4,"emitter"],[72,13,156,11],[72,15,156,4,"emitter"],[72,22,156,11],[73,6,157,4,"beforeRemoveListeners"],[73,27,157,25],[73,29,157,4,"beforeRemoveListeners"],[74,4,158,2],[74,5,158,3],[74,6,158,4],[75,4,160,2,"React"],[75,9,160,7],[75,10,160,8,"useEffect"],[75,19,160,17],[75,20,161,4],[76,6,161,4],[76,13,161,10,"addListenerParent"],[76,30,161,27],[76,50,161,10,"addListenerParent"],[76,67,161,27],[76,68,161,30],[76,76,161,38],[76,78,161,40,"onAction"],[76,86,161,48],[76,87,161,49],[77,4,161,49],[77,7,162,4],[77,8,162,5,"addListenerParent"],[77,25,162,22],[77,27,162,24,"onAction"],[77,35,162,32],[77,36,162,33],[77,37,163,3],[78,4,165,2],[78,11,165,9,"onAction"],[78,19,165,17],[79,2,166,0],[80,0,166,1]],"functionMap":{"names":["<global>","useOnAction","React.useEffect$argument_0","onAction"],"mappings":"AAA;eCqC;kBCoB;GDE;IEG;KF4E;ICsB,6CD;CDK"}},"type":"js/module"}]}