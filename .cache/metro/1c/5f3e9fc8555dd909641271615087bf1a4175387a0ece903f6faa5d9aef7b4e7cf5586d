{"dependencies":[{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":64},"end":{"line":2,"column":31,"index":95}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":97},"end":{"line":4,"column":66,"index":163}},{"start":{"line":5,"column":0,"index":164},"end":{"line":5,"column":62,"index":226}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":4,"column":0,"index":97},"end":{"line":4,"column":66,"index":163}}],"key":"y9eQQdj9MvCs7akL60igi3d/dsI="}},{"name":"./NavigationStateContext","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":164},"end":{"line":5,"column":62,"index":226}}],"key":"TdfjuPPN8UAMLY+O68wyv7/xOLM="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOptionsGetters;\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[0], \"react\"));\n  var _NavigationBuilderContext = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"./NavigationBuilderContext\"));\n  var _NavigationStateContext = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[3], \"./NavigationStateContext\"));\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n  function useOptionsGetters(_ref) {\n    var key = _ref.key,\n      options = _ref.options,\n      navigation = _ref.navigation;\n    var optionsRef = React.useRef(options);\n    var optionsGettersFromChildRef = React.useRef({});\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n      onOptionsChange = _React$useContext.onOptionsChange;\n    var _React$useContext2 = React.useContext(_NavigationStateContext.default),\n      parentAddOptionsGetter = _React$useContext2.addOptionsGetter;\n    var optionsChangeListener = React.useCallback(function () {\n      var _navigation$isFocused;\n      var isFocused = (_navigation$isFocused = navigation == null ? void 0 : navigation.isFocused()) != null ? _navigation$isFocused : true;\n      var hasChildren = Object.keys(optionsGettersFromChildRef.current).length;\n      if (isFocused && !hasChildren) {\n        var _optionsRef$current;\n        onOptionsChange((_optionsRef$current = optionsRef.current) != null ? _optionsRef$current : {});\n      }\n    }, [navigation, onOptionsChange]);\n    React.useEffect(function () {\n      optionsRef.current = options;\n      optionsChangeListener();\n      return navigation == null ? void 0 : navigation.addListener('focus', optionsChangeListener);\n    }, [navigation, options, optionsChangeListener]);\n    var getOptionsFromListener = React.useCallback(function () {\n      for (var _key in optionsGettersFromChildRef.current) {\n        if (optionsGettersFromChildRef.current.hasOwnProperty(_key)) {\n          var _optionsGettersFromCh, _optionsGettersFromCh2;\n          var result = (_optionsGettersFromCh = (_optionsGettersFromCh2 = optionsGettersFromChildRef.current)[_key]) == null ? void 0 : _optionsGettersFromCh.call(_optionsGettersFromCh2);\n          if (result !== null) {\n            return result;\n          }\n        }\n      }\n      return null;\n    }, []);\n    var getCurrentOptions = React.useCallback(function () {\n      var _navigation$isFocused2;\n      var isFocused = (_navigation$isFocused2 = navigation == null ? void 0 : navigation.isFocused()) != null ? _navigation$isFocused2 : true;\n      if (!isFocused) {\n        return null;\n      }\n      var optionsFromListener = getOptionsFromListener();\n      if (optionsFromListener !== null) {\n        return optionsFromListener;\n      }\n      return optionsRef.current;\n    }, [navigation, getOptionsFromListener]);\n    React.useEffect(function () {\n      return parentAddOptionsGetter == null ? void 0 : parentAddOptionsGetter(key, getCurrentOptions);\n    }, [getCurrentOptions, parentAddOptionsGetter, key]);\n    var addOptionsGetter = React.useCallback(function (key, getter) {\n      optionsGettersFromChildRef.current[key] = getter;\n      optionsChangeListener();\n      return function () {\n        delete optionsGettersFromChildRef.current[key];\n        optionsChangeListener();\n      };\n    }, [optionsChangeListener]);\n    return {\n      addOptionsGetter: addOptionsGetter,\n      getCurrentOptions: getCurrentOptions\n    };\n  }\n});","lineCount":75,"map":[[6,2,2,0],[7,2,4,0],[8,2,5,0],[9,2,5,62],[10,2,5,62],[11,2,14,15],[11,11,14,24,"useOptionsGetters"],[11,28,14,41],[11,35,18,12],[12,4,18,12],[12,8,15,2,"key"],[12,11,15,5],[12,19,15,2,"key"],[12,22,15,5],[13,6,16,2,"options"],[13,13,16,9],[13,21,16,2,"options"],[13,28,16,9],[14,6,17,2,"navigation"],[14,16,17,12],[14,24,17,2,"navigation"],[14,34,17,12],[15,4,19,2],[15,8,19,8,"optionsRef"],[15,18,19,18],[15,21,19,21,"React"],[15,26,19,26],[15,27,19,27,"useRef"],[15,33,19,33],[15,34,19,54,"options"],[15,41,19,61],[15,42,19,62],[16,4,20,2],[16,8,20,8,"optionsGettersFromChildRef"],[16,34,20,34],[16,37,20,37,"React"],[16,42,20,42],[16,43,20,43,"useRef"],[16,49,20,49],[16,50,22,4],[16,51,22,5],[16,52,22,6],[16,53,22,7],[17,4,24,2],[17,28,24,30,"React"],[17,33,24,35],[17,34,24,36,"useContext"],[17,44,24,46],[17,45,24,47,"NavigationBuilderContext"],[17,78,24,71],[17,79,24,72],[18,6,24,10,"onOptionsChange"],[18,21,24,25],[18,42,24,10,"onOptionsChange"],[18,57,24,25],[19,4,25,2],[19,29,25,55,"React"],[19,34,25,60],[19,35,25,61,"useContext"],[19,45,25,71],[19,46,26,4,"NavigationStateContext"],[19,77,26,26],[19,78,27,3],[20,6,25,28,"parentAddOptionsGetter"],[20,28,25,50],[20,50,25,10,"addOptionsGetter"],[20,66,25,26],[21,4,29,2],[21,8,29,8,"optionsChangeListener"],[21,29,29,29],[21,32,29,32,"React"],[21,37,29,37],[21,38,29,38,"useCallback"],[21,49,29,49],[21,50,29,50],[21,62,29,56],[22,6,29,56],[23,6,30,4],[23,10,30,10,"isFocused"],[23,19,30,19],[23,47,30,22,"navigation"],[23,57,30,32],[23,77,30,22,"navigation"],[23,87,30,32],[23,88,30,34,"isFocused"],[23,97,30,43],[23,99,30,45],[23,135,30,49],[23,139,30,53],[24,6,31,4],[24,10,31,10,"hasChildren"],[24,21,31,21],[24,24,31,24,"Object"],[24,30,31,30],[24,31,31,31,"keys"],[24,35,31,35],[24,36,31,36,"optionsGettersFromChildRef"],[24,62,31,62],[24,63,31,63,"current"],[24,70,31,70],[24,71,31,71],[24,72,31,72,"length"],[24,78,31,78],[25,6,33,4],[25,10,33,8,"isFocused"],[25,19,33,17],[25,23,33,21],[25,24,33,22,"hasChildren"],[25,35,33,33],[25,37,33,35],[26,8,33,35],[27,8,34,6,"onOptionsChange"],[27,23,34,21],[27,47,34,22,"optionsRef"],[27,57,34,32],[27,58,34,33,"current"],[27,65,34,40],[27,99,34,44],[27,100,34,45],[27,101,34,46],[27,102,34,47],[28,6,35,4],[29,4,36,2],[29,5,36,3],[29,7,36,5],[29,8,36,6,"navigation"],[29,18,36,16],[29,20,36,18,"onOptionsChange"],[29,35,36,33],[29,36,36,34],[29,37,36,35],[30,4,38,2,"React"],[30,9,38,7],[30,10,38,8,"useEffect"],[30,19,38,17],[30,20,38,18],[30,32,38,24],[31,6,39,4,"optionsRef"],[31,16,39,14],[31,17,39,15,"current"],[31,24,39,22],[31,27,39,25,"options"],[31,34,39,32],[32,6,40,4,"optionsChangeListener"],[32,27,40,25],[32,29,40,27],[33,6,42,4],[33,13,42,11,"navigation"],[33,23,42,21],[33,43,42,11,"navigation"],[33,53,42,21],[33,54,42,23,"addListener"],[33,65,42,34],[33,66,42,35],[33,73,42,42],[33,75,42,44,"optionsChangeListener"],[33,96,42,65],[33,97,42,66],[34,4,43,2],[34,5,43,3],[34,7,43,5],[34,8,43,6,"navigation"],[34,18,43,16],[34,20,43,18,"options"],[34,27,43,25],[34,29,43,27,"optionsChangeListener"],[34,50,43,48],[34,51,43,49],[34,52,43,50],[35,4,45,2],[35,8,45,8,"getOptionsFromListener"],[35,30,45,30],[35,33,45,33,"React"],[35,38,45,38],[35,39,45,39,"useCallback"],[35,50,45,50],[35,51,45,51],[35,63,45,57],[36,6,46,4],[36,11,46,9],[36,15,46,13,"key"],[36,19,46,16],[36,23,46,20,"optionsGettersFromChildRef"],[36,49,46,46],[36,50,46,47,"current"],[36,57,46,54],[36,59,46,56],[37,8,47,6],[37,12,47,10,"optionsGettersFromChildRef"],[37,38,47,36],[37,39,47,37,"current"],[37,46,47,44],[37,47,47,45,"hasOwnProperty"],[37,61,47,59],[37,62,47,60,"key"],[37,66,47,63],[37,67,47,64],[37,69,47,66],[38,10,47,66],[39,10,48,8],[39,14,48,14,"result"],[39,20,48,20],[39,48,48,23],[39,74,48,23,"optionsGettersFromChildRef"],[39,100,48,49],[39,101,48,50,"current"],[39,108,48,57],[39,110,48,58,"key"],[39,114,48,61],[39,115,48,62],[39,136,48,23],[39,186,48,66],[40,10,51,8],[40,14,51,12,"result"],[40,20,51,18],[40,25,51,23],[40,29,51,27],[40,31,51,29],[41,12,52,10],[41,19,52,17,"result"],[41,25,52,23],[42,10,53,8],[43,8,54,6],[44,6,55,4],[45,6,57,4],[45,13,57,11],[45,17,57,15],[46,4,58,2],[46,5,58,3],[46,7,58,5],[46,9,58,7],[46,10,58,8],[47,4,60,2],[47,8,60,8,"getCurrentOptions"],[47,25,60,25],[47,28,60,28,"React"],[47,33,60,33],[47,34,60,34,"useCallback"],[47,45,60,45],[47,46,60,46],[47,58,60,52],[48,6,60,52],[49,6,61,4],[49,10,61,10,"isFocused"],[49,19,61,19],[49,48,61,22,"navigation"],[49,58,61,32],[49,78,61,22,"navigation"],[49,88,61,32],[49,89,61,34,"isFocused"],[49,98,61,43],[49,100,61,45],[49,137,61,49],[49,141,61,53],[50,6,63,4],[50,10,63,8],[50,11,63,9,"isFocused"],[50,20,63,18],[50,22,63,20],[51,8,64,6],[51,15,64,13],[51,19,64,17],[52,6,65,4],[53,6,67,4],[53,10,67,10,"optionsFromListener"],[53,29,67,29],[53,32,67,32,"getOptionsFromListener"],[53,54,67,54],[53,56,67,56],[54,6,69,4],[54,10,69,8,"optionsFromListener"],[54,29,69,27],[54,34,69,32],[54,38,69,36],[54,40,69,38],[55,8,70,6],[55,15,70,13,"optionsFromListener"],[55,34,70,32],[56,6,71,4],[57,6,73,4],[57,13,73,11,"optionsRef"],[57,23,73,21],[57,24,73,22,"current"],[57,31,73,29],[58,4,74,2],[58,5,74,3],[58,7,74,5],[58,8,74,6,"navigation"],[58,18,74,16],[58,20,74,18,"getOptionsFromListener"],[58,42,74,40],[58,43,74,41],[58,44,74,42],[59,4,76,2,"React"],[59,9,76,7],[59,10,76,8,"useEffect"],[59,19,76,17],[59,20,76,18],[59,32,76,24],[60,6,77,4],[60,13,77,11,"parentAddOptionsGetter"],[60,35,77,33],[60,55,77,11,"parentAddOptionsGetter"],[60,77,77,33],[60,78,77,36,"key"],[60,81,77,39],[60,83,77,42,"getCurrentOptions"],[60,100,77,59],[60,101,77,60],[61,4,78,2],[61,5,78,3],[61,7,78,5],[61,8,78,6,"getCurrentOptions"],[61,25,78,23],[61,27,78,25,"parentAddOptionsGetter"],[61,49,78,47],[61,51,78,49,"key"],[61,54,78,52],[61,55,78,53],[61,56,78,54],[62,4,80,2],[62,8,80,8,"addOptionsGetter"],[62,24,80,24],[62,27,80,27,"React"],[62,32,80,32],[62,33,80,33,"useCallback"],[62,44,80,44],[62,45,81,4],[62,55,81,5,"key"],[62,58,81,16],[62,60,81,18,"getter"],[62,66,81,57],[62,68,81,62],[63,6,82,6,"optionsGettersFromChildRef"],[63,32,82,32],[63,33,82,33,"current"],[63,40,82,40],[63,41,82,41,"key"],[63,44,82,44],[63,45,82,45],[63,48,82,48,"getter"],[63,54,82,54],[64,6,83,6,"optionsChangeListener"],[64,27,83,27],[64,29,83,29],[65,6,85,6],[65,13,85,13],[65,25,85,19],[66,8,87,8],[66,15,87,15,"optionsGettersFromChildRef"],[66,41,87,41],[66,42,87,42,"current"],[66,49,87,49],[66,50,87,50,"key"],[66,53,87,53],[66,54,87,54],[67,8,88,8,"optionsChangeListener"],[67,29,88,29],[67,31,88,31],[68,6,89,6],[68,7,89,7],[69,4,90,4],[69,5,90,5],[69,7,91,4],[69,8,91,5,"optionsChangeListener"],[69,29,91,26],[69,30,91,27],[69,31,92,3],[70,4,94,2],[70,11,94,9],[71,6,95,4,"addOptionsGetter"],[71,22,95,20],[71,24,95,4,"addOptionsGetter"],[71,40,95,20],[72,6,96,4,"getCurrentOptions"],[72,23,96,21],[72,25,96,4,"getCurrentOptions"],[73,4,97,2],[73,5,97,3],[74,2,98,0],[75,0,98,1]],"functionMap":{"names":["<global>","useOptionsGetters","optionsChangeListener","React.useEffect$argument_0","getOptionsFromListener","getCurrentOptions","addOptionsGetter","<anonymous>"],"mappings":"AAA;eCa;kDCe;GDO;kBEE;GFK;mDGE;GHa;8CIE;GJc;kBEE;GFE;IKG;aCI;ODI;KLC;CDQ"}},"type":"js/module"}]}