{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":13,"column":0,"index":268},"end":{"line":13,"column":58,"index":326}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"../vendor/emitter/EventEmitter","data":{"asyncType":null,"locs":[{"start":{"line":13,"column":0,"index":268},"end":{"line":13,"column":58,"index":326}}],"key":"fgDwi/IrVIcBdLV47qHthWsoTIw="}},{"name":"../Utilities/infoLog","data":{"asyncType":null,"locs":[{"start":{"line":122,"column":13,"index":4012},"end":{"line":122,"column":69,"index":4068}},{"start":{"line":133,"column":13,"index":4304},"end":{"line":133,"column":68,"index":4359}}],"key":"te7FMDljSHoh4Ptoq0ebhkaWbSA="}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":134,"column":4,"index":4365},"end":{"line":134,"column":78,"index":4439}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}},{"name":"./TaskQueue","data":{"asyncType":null,"locs":[{"start":{"line":156,"column":19,"index":5158},"end":{"line":156,"column":64,"index":5203}}],"key":"1ceiWyFBQZw9eNp9+Dpb/TWmHXc="}},{"name":"../BatchedBridge/BatchedBridge","data":{"asyncType":null,"locs":[{"start":{"line":199,"column":8,"index":6506},"end":{"line":199,"column":45,"index":6543}}],"key":"MvuFHLrr66uWZvuv+I/rfsDBNt0="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _EventEmitter = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[1], \"../vendor/emitter/EventEmitter\"));\n  var _emitter = new _EventEmitter.default();\n  var DEBUG_DELAY = 0;\n  var DEBUG = false;\n  var InteractionManager = {\n    Events: {\n      interactionStart: 'interactionStart',\n      interactionComplete: 'interactionComplete'\n    },\n    runAfterInteractions: function runAfterInteractions(task) {\n      var tasks = [];\n      var promise = new Promise(function (resolve) {\n        _scheduleUpdate();\n        if (task) {\n          tasks.push(task);\n        }\n        tasks.push({\n          run: resolve,\n          name: 'resolve ' + (task && task.name || '?')\n        });\n        _taskQueue.enqueueTasks(tasks);\n      });\n      return {\n        then: promise.then.bind(promise),\n        cancel: function cancel() {\n          _taskQueue.cancelTasks(tasks);\n        }\n      };\n    },\n    createInteractionHandle: function createInteractionHandle() {\n      DEBUG && _$$_REQUIRE(_dependencyMap[2], \"../Utilities/infoLog\")('InteractionManager: create interaction handle');\n      _scheduleUpdate();\n      var handle = ++_inc;\n      _addInteractionSet.add(handle);\n      return handle;\n    },\n    clearInteractionHandle: function clearInteractionHandle(handle) {\n      DEBUG && _$$_REQUIRE(_dependencyMap[2], \"../Utilities/infoLog\")('InteractionManager: clear interaction handle');\n      _$$_REQUIRE(_dependencyMap[3], \"invariant\")(!!handle, 'InteractionManager: Must provide a handle to clear.');\n      _scheduleUpdate();\n      _addInteractionSet.delete(handle);\n      _deleteInteractionSet.add(handle);\n    },\n    addListener: _emitter.addListener.bind(_emitter),\n    setDeadline: function setDeadline(deadline) {\n      _deadline = deadline;\n    }\n  };\n  var _interactionSet = new Set();\n  var _addInteractionSet = new Set();\n  var _deleteInteractionSet = new Set();\n  var _taskQueue = new (_$$_REQUIRE(_dependencyMap[4], \"./TaskQueue\"))({\n    onMoreTasks: _scheduleUpdate\n  });\n  var _nextUpdateHandle = 0;\n  var _inc = 0;\n  var _deadline = -1;\n  function _scheduleUpdate() {\n    if (!_nextUpdateHandle) {\n      if (_deadline > 0) {\n        _nextUpdateHandle = setTimeout(_processUpdate, 0 + DEBUG_DELAY);\n      } else {\n        _nextUpdateHandle = setImmediate(_processUpdate);\n      }\n    }\n  }\n  function _processUpdate() {\n    _nextUpdateHandle = 0;\n    var interactionCount = _interactionSet.size;\n    _addInteractionSet.forEach(function (handle) {\n      return _interactionSet.add(handle);\n    });\n    _deleteInteractionSet.forEach(function (handle) {\n      return _interactionSet.delete(handle);\n    });\n    var nextInteractionCount = _interactionSet.size;\n    if (interactionCount !== 0 && nextInteractionCount === 0) {\n      _emitter.emit(InteractionManager.Events.interactionComplete);\n    } else if (interactionCount === 0 && nextInteractionCount !== 0) {\n      _emitter.emit(InteractionManager.Events.interactionStart);\n    }\n    if (nextInteractionCount === 0) {\n      while (_taskQueue.hasTasksToProcess()) {\n        _taskQueue.processNext();\n        if (_deadline > 0 && _$$_REQUIRE(_dependencyMap[5], \"../BatchedBridge/BatchedBridge\").getEventLoopRunningTime() >= _deadline) {\n          _scheduleUpdate();\n          break;\n        }\n      }\n    }\n    _addInteractionSet.clear();\n    _deleteInteractionSet.clear();\n  }\n  module.exports = InteractionManager;\n});","lineCount":96,"map":[[2,2,13,0],[3,2,22,0],[3,6,22,6,"_emitter"],[3,14,22,14],[3,17,22,17],[3,21,22,21,"EventEmitter"],[3,42,22,33],[3,44,25,4],[4,2,27,0],[4,6,27,6,"DEBUG_DELAY"],[4,17,27,20],[4,20,27,23],[4,21,27,24],[5,2,28,0],[5,6,28,6,"DEBUG"],[5,11,28,18],[5,14,28,21],[5,19,28,26],[6,2,79,0],[6,6,79,6,"InteractionManager"],[6,24,79,24],[6,27,79,27],[7,4,80,2,"Events"],[7,10,80,8],[7,12,80,10],[8,6,81,4,"interactionStart"],[8,22,81,20],[8,24,81,22],[8,42,81,40],[9,6,82,4,"interactionComplete"],[9,25,82,23],[9,27,82,25],[10,4,83,2],[10,5,83,3],[11,4,89,2,"runAfterInteractions"],[11,24,89,22],[11,56,89,23,"task"],[11,60,89,34],[11,62,96,4],[12,6,97,4],[12,10,97,10,"tasks"],[12,15,97,28],[12,18,97,31],[12,20,97,33],[13,6,98,4],[13,10,98,10,"promise"],[13,17,98,17],[13,20,98,20],[13,24,98,24,"Promise"],[13,31,98,31],[13,32,98,32],[13,42,98,33,"resolve"],[13,49,98,52],[13,51,98,57],[14,8,99,6,"_scheduleUpdate"],[14,23,99,21],[14,25,99,23],[15,8,100,6],[15,12,100,10,"task"],[15,16,100,14],[15,18,100,16],[16,10,101,8,"tasks"],[16,15,101,13],[16,16,101,14,"push"],[16,20,101,18],[16,21,101,19,"task"],[16,25,101,23],[16,26,101,24],[17,8,102,6],[18,8,103,6,"tasks"],[18,13,103,11],[18,14,103,12,"push"],[18,18,103,16],[18,19,103,17],[19,10,104,8,"run"],[19,13,104,11],[19,15,104,13,"resolve"],[19,22,104,20],[20,10,105,8,"name"],[20,14,105,12],[20,16,105,14],[20,26,105,24],[20,30,105,29,"task"],[20,34,105,33],[20,38,105,37,"task"],[20,42,105,41],[20,43,105,42,"name"],[20,47,105,46],[20,51,105,51],[20,54,105,54],[21,8,106,6],[21,9,106,7],[21,10,106,8],[22,8,107,6,"_taskQueue"],[22,18,107,16],[22,19,107,17,"enqueueTasks"],[22,31,107,29],[22,32,107,30,"tasks"],[22,37,107,35],[22,38,107,36],[23,6,108,4],[23,7,108,5],[23,8,108,6],[24,6,109,4],[24,13,109,11],[25,8,111,6,"then"],[25,12,111,10],[25,14,111,12,"promise"],[25,21,111,19],[25,22,111,20,"then"],[25,26,111,24],[25,27,111,25,"bind"],[25,31,111,29],[25,32,111,30,"promise"],[25,39,111,37],[25,40,111,38],[26,8,112,6,"cancel"],[26,14,112,12],[26,16,112,14],[26,34,112,26],[27,10,113,8,"_taskQueue"],[27,20,113,18],[27,21,113,19,"cancelTasks"],[27,32,113,30],[27,33,113,31,"tasks"],[27,38,113,36],[27,39,113,37],[28,8,114,6],[29,6,115,4],[29,7,115,5],[30,4,116,2],[30,5,116,3],[31,4,121,2,"createInteractionHandle"],[31,27,121,25],[31,64,121,36],[32,6,122,4,"DEBUG"],[32,11,122,9],[32,15,122,13],[32,70,122,21],[32,117,122,68],[32,118,122,69],[33,6,123,4,"_scheduleUpdate"],[33,21,123,19],[33,23,123,21],[34,6,124,4],[34,10,124,10,"handle"],[34,16,124,16],[34,19,124,19],[34,21,124,21,"_inc"],[34,25,124,25],[35,6,125,4,"_addInteractionSet"],[35,24,125,22],[35,25,125,23,"add"],[35,28,125,26],[35,29,125,27,"handle"],[35,35,125,33],[35,36,125,34],[36,6,126,4],[36,13,126,11,"handle"],[36,19,126,17],[37,4,127,2],[37,5,127,3],[38,4,132,2,"clearInteractionHandle"],[38,26,132,24],[38,60,132,25,"handle"],[38,66,132,39],[38,68,132,41],[39,6,133,4,"DEBUG"],[39,11,133,9],[39,15,133,13],[39,70,133,21],[39,116,133,67],[39,117,133,68],[40,6,134,4],[40,50,134,14],[40,51,134,15],[40,52,134,16,"handle"],[40,58,134,22],[40,60,134,24],[40,113,134,77],[40,114,134,78],[41,6,135,4,"_scheduleUpdate"],[41,21,135,19],[41,23,135,21],[42,6,136,4,"_addInteractionSet"],[42,24,136,22],[42,25,136,23,"delete"],[42,31,136,29],[42,32,136,30,"handle"],[42,38,136,36],[42,39,136,37],[43,6,137,4,"_deleteInteractionSet"],[43,27,137,25],[43,28,137,26,"add"],[43,31,137,29],[43,32,137,30,"handle"],[43,38,137,36],[43,39,137,37],[44,4,138,2],[44,5,138,3],[45,4,141,2,"addListener"],[45,15,141,13],[45,17,141,16,"_emitter"],[45,25,141,24],[45,26,141,25,"addListener"],[45,37,141,36],[45,38,141,37,"bind"],[45,42,141,41],[45,43,141,42,"_emitter"],[45,51,141,50],[45,52,141,64],[46,4,148,2,"setDeadline"],[46,15,148,13],[46,38,148,14,"deadline"],[46,46,148,30],[46,48,148,32],[47,6,149,4,"_deadline"],[47,15,149,13],[47,18,149,16,"deadline"],[47,26,149,24],[48,4,150,2],[49,2,151,0],[49,3,151,1],[50,2,153,0],[50,6,153,6,"_interactionSet"],[50,21,153,21],[50,24,153,24],[50,28,153,28,"Set"],[50,31,153,31],[50,33,153,50],[51,2,154,0],[51,6,154,6,"_addInteractionSet"],[51,24,154,24],[51,27,154,27],[51,31,154,31,"Set"],[51,34,154,34],[51,36,154,53],[52,2,155,0],[52,6,155,6,"_deleteInteractionSet"],[52,27,155,27],[52,30,155,30],[52,34,155,34,"Set"],[52,37,155,37],[52,39,155,47],[53,2,156,0],[53,6,156,6,"_taskQueue"],[53,16,156,16],[53,19,156,19],[53,71,156,33],[54,4,156,34,"onMoreTasks"],[54,15,156,45],[54,17,156,47,"_scheduleUpdate"],[55,2,156,62],[55,3,156,63],[55,4,156,64],[56,2,157,0],[56,6,157,4,"_nextUpdateHandle"],[56,23,157,45],[56,26,157,48],[56,27,157,49],[57,2,158,0],[57,6,158,4,"_inc"],[57,10,158,8],[57,13,158,11],[57,14,158,12],[58,2,159,0],[58,6,159,4,"_deadline"],[58,15,159,13],[58,18,159,16],[58,19,159,17],[58,20,159,18],[59,2,164,0],[59,11,164,9,"_scheduleUpdate"],[59,26,164,24],[59,29,164,27],[60,4,165,2],[60,8,165,6],[60,9,165,7,"_nextUpdateHandle"],[60,26,165,24],[60,28,165,26],[61,6,166,4],[61,10,166,8,"_deadline"],[61,19,166,17],[61,22,166,20],[61,23,166,21],[61,25,166,23],[62,8,167,6,"_nextUpdateHandle"],[62,25,167,23],[62,28,167,26,"setTimeout"],[62,38,167,36],[62,39,167,37,"_processUpdate"],[62,53,167,51],[62,55,167,53],[62,56,167,54],[62,59,167,57,"DEBUG_DELAY"],[62,70,167,68],[62,71,167,69],[63,6,168,4],[63,7,168,5],[63,13,168,11],[64,8,169,6,"_nextUpdateHandle"],[64,25,169,23],[64,28,169,26,"setImmediate"],[64,40,169,38],[64,41,169,39,"_processUpdate"],[64,55,169,53],[64,56,169,54],[65,6,170,4],[66,4,171,2],[67,2,172,0],[68,2,177,0],[68,11,177,9,"_processUpdate"],[68,25,177,23],[68,28,177,26],[69,4,178,2,"_nextUpdateHandle"],[69,21,178,19],[69,24,178,22],[69,25,178,23],[70,4,180,2],[70,8,180,8,"interactionCount"],[70,24,180,24],[70,27,180,27,"_interactionSet"],[70,42,180,42],[70,43,180,43,"size"],[70,47,180,47],[71,4,181,2,"_addInteractionSet"],[71,22,181,20],[71,23,181,21,"forEach"],[71,30,181,28],[71,31,181,29],[71,41,181,29,"handle"],[71,47,181,35],[72,6,181,35],[72,13,181,39,"_interactionSet"],[72,28,181,54],[72,29,181,55,"add"],[72,32,181,58],[72,33,181,59,"handle"],[72,39,181,65],[72,40,181,66],[73,4,181,66],[73,6,181,67],[74,4,182,2,"_deleteInteractionSet"],[74,25,182,23],[74,26,182,24,"forEach"],[74,33,182,31],[74,34,182,32],[74,44,182,32,"handle"],[74,50,182,38],[75,6,182,38],[75,13,182,42,"_interactionSet"],[75,28,182,57],[75,29,182,58,"delete"],[75,35,182,64],[75,36,182,65,"handle"],[75,42,182,71],[75,43,182,72],[76,4,182,72],[76,6,182,73],[77,4,183,2],[77,8,183,8,"nextInteractionCount"],[77,28,183,28],[77,31,183,31,"_interactionSet"],[77,46,183,46],[77,47,183,47,"size"],[77,51,183,51],[78,4,185,2],[78,8,185,6,"interactionCount"],[78,24,185,22],[78,29,185,27],[78,30,185,28],[78,34,185,32,"nextInteractionCount"],[78,54,185,52],[78,59,185,57],[78,60,185,58],[78,62,185,60],[79,6,187,4,"_emitter"],[79,14,187,12],[79,15,187,13,"emit"],[79,19,187,17],[79,20,187,18,"InteractionManager"],[79,38,187,36],[79,39,187,37,"Events"],[79,45,187,43],[79,46,187,44,"interactionComplete"],[79,65,187,63],[79,66,187,64],[80,4,188,2],[80,5,188,3],[80,11,188,9],[80,15,188,13,"interactionCount"],[80,31,188,29],[80,36,188,34],[80,37,188,35],[80,41,188,39,"nextInteractionCount"],[80,61,188,59],[80,66,188,64],[80,67,188,65],[80,69,188,67],[81,6,190,4,"_emitter"],[81,14,190,12],[81,15,190,13,"emit"],[81,19,190,17],[81,20,190,18,"InteractionManager"],[81,38,190,36],[81,39,190,37,"Events"],[81,45,190,43],[81,46,190,44,"interactionStart"],[81,62,190,60],[81,63,190,61],[82,4,191,2],[83,4,194,2],[83,8,194,6,"nextInteractionCount"],[83,28,194,26],[83,33,194,31],[83,34,194,32],[83,36,194,34],[84,6,195,4],[84,13,195,11,"_taskQueue"],[84,23,195,21],[84,24,195,22,"hasTasksToProcess"],[84,41,195,39],[84,43,195,41],[84,45,195,43],[85,8,196,6,"_taskQueue"],[85,18,196,16],[85,19,196,17,"processNext"],[85,30,196,28],[85,32,196,30],[86,8,197,6],[86,12,198,8,"_deadline"],[86,21,198,17],[86,24,198,20],[86,25,198,21],[86,29,199,8],[86,94,199,22,"getEventLoopRunningTime"],[86,117,199,45],[86,119,199,47],[86,123,199,51,"_deadline"],[86,132,199,60],[86,134,200,8],[87,10,202,8,"_scheduleUpdate"],[87,25,202,23],[87,27,202,25],[88,10,203,8],[89,8,204,6],[90,6,205,4],[91,4,206,2],[92,4,207,2,"_addInteractionSet"],[92,22,207,20],[92,23,207,21,"clear"],[92,28,207,26],[92,30,207,28],[93,4,208,2,"_deleteInteractionSet"],[93,25,208,23],[93,26,208,24,"clear"],[93,31,208,29],[93,33,208,31],[94,2,209,0],[95,2,211,0,"module"],[95,8,211,6],[95,9,211,7,"exports"],[95,16,211,14],[95,19,211,17,"InteractionManager"],[95,37,211,35],[96,0,211,36]],"functionMap":{"names":["<global>","runAfterInteractions","Promise$argument_0","cancel","createInteractionHandle","clearInteractionHandle","setDeadline","_scheduleUpdate","_processUpdate","_addInteractionSet.forEach$argument_0","_deleteInteractionSet.forEach$argument_0"],"mappings":"AAA;ECwF;gCCS;KDU;cEI;OFE;GDE;EIK;GJM;EKK;GLM;EMU;GNE;AOc;CPQ;AQK;6BCI,qCD;gCEC,wCF;CR2B"}},"type":"js/module"}]}