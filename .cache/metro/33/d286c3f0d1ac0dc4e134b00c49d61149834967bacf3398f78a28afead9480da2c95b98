{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":100,"column":0,"index":2801}},{"start":{"line":7,"column":0,"index":122},"end":{"line":9,"column":36,"index":222}},{"start":{"line":10,"column":0,"index":223},"end":{"line":10,"column":62,"index":285}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/defineProperty","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":100,"column":0,"index":2801}}],"key":"RY2z4+Bdq4bpTD/1b+1jGPWZdgA="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":5,"column":0,"index":89},"end":{"line":5,"column":31,"index":120}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"locs":[{"start":{"line":7,"column":0,"index":122},"end":{"line":9,"column":36,"index":222}}],"key":"y9eQQdj9MvCs7akL60igi3d/dsI="}},{"name":"./NavigationRouteContext","data":{"asyncType":null,"locs":[{"start":{"line":10,"column":0,"index":223},"end":{"line":10,"column":62,"index":285}}],"key":"HeyVDSY+CsJeYUdsxrU2U3K5dPs="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOnPreventRemove;\n  exports.shouldPreventRemove = void 0;\n  var _defineProperty2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[2], \"react\"));\n  var _NavigationBuilderContext = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[3], \"./NavigationBuilderContext\"));\n  var _NavigationRouteContext = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[4], \"./NavigationRouteContext\"));\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = function shouldPreventRemove(emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) {\n    var _action$VISITED_ROUTE;\n    var nextRouteKeys = nextRoutes.map(function (route) {\n      return route.key;\n    });\n    var removedRoutes = currentRoutes.filter(function (route) {\n      return !nextRouteKeys.includes(route.key);\n    }).reverse();\n    var visitedRouteKeys = (_action$VISITED_ROUTE = action[VISITED_ROUTE_KEYS]) != null ? _action$VISITED_ROUTE : new Set();\n    var beforeRemoveAction = Object.assign({}, action, (0, _defineProperty2.default)({}, VISITED_ROUTE_KEYS, visitedRouteKeys));\n    for (var route of removedRoutes) {\n      var _beforeRemoveListener;\n      if (visitedRouteKeys.has(route.key)) {\n        continue;\n      }\n      var isPrevented = (_beforeRemoveListener = beforeRemoveListeners[route.key]) == null ? void 0 : _beforeRemoveListener.call(beforeRemoveListeners, beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  exports.shouldPreventRemove = shouldPreventRemove;\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContext.default);\n    var routeKey = route == null ? void 0 : route.key;\n    React.useEffect(function () {\n      if (routeKey) {\n        return addKeyedListener == null ? void 0 : addKeyedListener('beforeRemove', routeKey, function (action) {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":66,"map":[[8,2,5,0],[9,2,7,0],[10,2,10,0],[11,2,10,62],[12,2,10,62],[13,2,20,0],[13,6,20,6,"VISITED_ROUTE_KEYS"],[13,24,20,24],[13,27,20,27,"Symbol"],[13,33,20,33],[13,34,20,34],[13,54,20,54],[13,55,20,55],[14,2,22,7],[14,6,22,13,"shouldPreventRemove"],[14,25,22,32],[14,28,22,35],[14,37,22,13,"shouldPreventRemove"],[14,56,22,32],[14,57,23,2,"emitter"],[14,64,23,52],[14,66,24,2,"beforeRemoveListeners"],[14,87,24,78],[14,89,25,2,"currentRoutes"],[14,102,25,34],[14,104,26,2,"nextRoutes"],[14,114,26,44],[14,116,27,2,"action"],[14,122,27,26],[14,124,28,5],[15,4,28,5],[16,4,29,2],[16,8,29,8,"nextRouteKeys"],[16,21,29,21],[16,24,29,24,"nextRoutes"],[16,34,29,34],[16,35,29,35,"map"],[16,38,29,38],[16,39,29,39],[16,49,29,40,"route"],[16,54,29,45],[17,6,29,45],[17,13,29,50,"route"],[17,18,29,55],[17,19,29,56,"key"],[17,22,29,59],[18,4,29,59],[18,6,29,60],[19,4,32,2],[19,8,32,8,"removedRoutes"],[19,21,32,21],[19,24,32,24,"currentRoutes"],[19,37,32,37],[19,38,33,5,"filter"],[19,44,33,11],[19,45,33,12],[19,55,33,13,"route"],[19,60,33,18],[20,6,33,18],[20,13,33,23],[20,14,33,24,"nextRouteKeys"],[20,27,33,37],[20,28,33,38,"includes"],[20,36,33,46],[20,37,33,47,"route"],[20,42,33,52],[20,43,33,53,"key"],[20,46,33,56],[20,47,33,57],[21,4,33,57],[21,6,33,58],[21,7,34,5,"reverse"],[21,14,34,12],[21,16,34,14],[22,4,36,2],[22,8,36,8,"visitedRouteKeys"],[22,24,36,37],[22,52,38,4,"action"],[22,58,38,10],[22,59,38,11,"VISITED_ROUTE_KEYS"],[22,77,38,29],[22,78,38,30],[22,114,38,34],[22,118,38,38,"Set"],[22,121,38,41],[22,123,38,51],[23,4,40,2],[23,8,40,8,"beforeRemoveAction"],[23,26,40,26],[23,47,41,7,"action"],[23,53,41,13],[23,89,42,5,"VISITED_ROUTE_KEYS"],[23,107,42,23],[23,109,42,26,"visitedRouteKeys"],[23,125,42,42],[23,127,43,3],[24,4,45,2],[24,9,45,7],[24,13,45,13,"route"],[24,18,45,18],[24,22,45,22,"removedRoutes"],[24,35,45,35],[24,37,45,37],[25,6,45,37],[26,6,46,4],[26,10,46,8,"visitedRouteKeys"],[26,26,46,24],[26,27,46,25,"has"],[26,30,46,28],[26,31,46,29,"route"],[26,36,46,34],[26,37,46,35,"key"],[26,40,46,38],[26,41,46,39],[26,43,46,41],[27,8,48,6],[28,6,49,4],[29,6,52,4],[29,10,52,10,"isPrevented"],[29,21,52,21],[29,49,52,24,"beforeRemoveListeners"],[29,70,52,45],[29,71,52,46,"route"],[29,76,52,51],[29,77,52,52,"key"],[29,80,52,55],[29,81,52,56],[29,102,52,24],[29,129,52,24,"beforeRemoveListeners"],[29,150,52,45],[29,152,52,59,"beforeRemoveAction"],[29,170,52,77],[29,171,52,78],[30,6,54,4],[30,10,54,8,"isPrevented"],[30,21,54,19],[30,23,54,21],[31,8,55,6],[31,15,55,13],[31,19,55,17],[32,6,56,4],[33,6,58,4,"visitedRouteKeys"],[33,22,58,20],[33,23,58,21,"add"],[33,26,58,24],[33,27,58,25,"route"],[33,32,58,30],[33,33,58,31,"key"],[33,36,58,34],[33,37,58,35],[34,6,60,4],[34,10,60,10,"event"],[34,15,60,15],[34,18,60,18,"emitter"],[34,25,60,25],[34,26,60,26,"emit"],[34,30,60,30],[34,31,60,31],[35,8,61,6,"type"],[35,12,61,10],[35,14,61,12],[35,28,61,26],[36,8,62,6,"target"],[36,14,62,12],[36,16,62,14,"route"],[36,21,62,19],[36,22,62,20,"key"],[36,25,62,23],[37,8,63,6,"data"],[37,12,63,10],[37,14,63,12],[38,10,63,14,"action"],[38,16,63,20],[38,18,63,22,"beforeRemoveAction"],[39,8,63,41],[39,9,63,42],[40,8,64,6,"canPreventDefault"],[40,25,64,23],[40,27,64,25],[41,6,65,4],[41,7,65,5],[41,8,65,6],[42,6,67,4],[42,10,67,8,"event"],[42,15,67,13],[42,16,67,14,"defaultPrevented"],[42,32,67,30],[42,34,67,32],[43,8,68,6],[43,15,68,13],[43,19,68,17],[44,6,69,4],[45,4,70,2],[46,4,72,2],[46,11,72,9],[46,16,72,14],[47,2,73,0],[47,3,73,1],[48,2,73,2],[49,2,75,15],[49,11,75,24,"useOnPreventRemove"],[49,29,75,42],[49,36,79,12],[50,4,79,12],[50,8,76,2,"getState"],[50,16,76,10],[50,24,76,2,"getState"],[50,32,76,10],[51,6,77,2,"emitter"],[51,13,77,9],[51,21,77,2,"emitter"],[51,28,77,9],[52,6,78,2,"beforeRemoveListeners"],[52,27,78,23],[52,35,78,2,"beforeRemoveListeners"],[52,56,78,23],[53,4,80,2],[53,28,80,31,"React"],[53,33,80,36],[53,34,80,37,"useContext"],[53,44,80,47],[53,45,80,48,"NavigationBuilderContext"],[53,78,80,72],[53,79,80,73],[54,6,80,10,"addKeyedListener"],[54,22,80,26],[54,43,80,10,"addKeyedListener"],[54,59,80,26],[55,4,81,2],[55,8,81,8,"route"],[55,13,81,13],[55,16,81,16,"React"],[55,21,81,21],[55,22,81,22,"useContext"],[55,32,81,32],[55,33,81,33,"NavigationRouteContext"],[55,64,81,55],[55,65,81,56],[56,4,82,2],[56,8,82,8,"routeKey"],[56,16,82,16],[56,19,82,19,"route"],[56,24,82,24],[56,44,82,19,"route"],[56,49,82,24],[56,50,82,26,"key"],[56,53,82,29],[57,4,84,2,"React"],[57,9,84,7],[57,10,84,8,"useEffect"],[57,19,84,17],[57,20,84,18],[57,32,84,24],[58,6,85,4],[58,10,85,8,"routeKey"],[58,18,85,16],[58,20,85,18],[59,8,86,6],[59,15,86,13,"addKeyedListener"],[59,31,86,29],[59,51,86,13,"addKeyedListener"],[59,67,86,29],[59,68,86,32],[59,82,86,46],[59,84,86,48,"routeKey"],[59,92,86,56],[59,94,86,58],[59,104,86,59,"action"],[59,110,86,65],[59,112,86,70],[60,10,87,8],[60,14,87,14,"state"],[60,19,87,19],[60,22,87,22,"getState"],[60,30,87,30],[60,32,87,32],[61,10,89,8],[61,17,89,15,"shouldPreventRemove"],[61,36,89,34],[61,37,90,10,"emitter"],[61,44,90,17],[61,46,91,10,"beforeRemoveListeners"],[61,67,91,31],[61,69,92,10,"state"],[61,74,92,15],[61,75,92,16,"routes"],[61,81,92,22],[61,83,93,10],[61,85,93,12],[61,87,94,10,"action"],[61,93,94,16],[61,94,95,9],[62,8,96,6],[62,9,96,7],[62,10,96,8],[63,6,97,4],[64,4,98,2],[64,5,98,3],[64,7,98,5],[64,8,98,6,"addKeyedListener"],[64,24,98,22],[64,26,98,24,"beforeRemoveListeners"],[64,47,98,45],[64,49,98,47,"emitter"],[64,56,98,54],[64,58,98,56,"getState"],[64,66,98,64],[64,68,98,66,"routeKey"],[64,76,98,74],[64,77,98,75],[64,78,98,76],[65,2,99,0],[66,0,99,1]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCqB;uCCO,oBD;YEI,6CF;CDwC;eIE;kBCS;0DCE;ODU;GDE;CJC"}},"type":"js/module"}]}