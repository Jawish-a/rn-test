{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":183,"column":0,"index":5105}},{"start":{"line":1,"column":0,"index":0},"end":{"line":183,"column":0,"index":5105}},{"start":{"line":13,"column":0,"index":300},"end":{"line":13,"column":50,"index":350}},{"start":{"line":14,"column":0,"index":351},"end":{"line":14,"column":34,"index":385}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":183,"column":0,"index":5105}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":183,"column":0,"index":5105}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"./NativeBlobModule","data":{"asyncType":null,"locs":[{"start":{"line":13,"column":0,"index":300},"end":{"line":13,"column":50,"index":350}}],"key":"8yhexf66+KMPl6M2NPjj2sFxaVw="}},{"name":"invariant","data":{"asyncType":null,"locs":[{"start":{"line":14,"column":0,"index":351},"end":{"line":14,"column":34,"index":385}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}},{"name":"./Blob","data":{"asyncType":null,"locs":[{"start":{"line":77,"column":10,"index":2260},"end":{"line":77,"column":30,"index":2280}},{"start":{"line":115,"column":39,"index":3251},"end":{"line":115,"column":53,"index":3265}}],"key":"EbjXBySE25qcfnrYju25x5GaG3k="}},{"name":"./BlobRegistry","data":{"asyncType":null,"locs":[{"start":{"line":113,"column":4,"index":3141},"end":{"line":113,"column":25,"index":3162}},{"start":{"line":135,"column":4,"index":3850},"end":{"line":135,"column":27,"index":3873}},{"start":{"line":136,"column":8,"index":3891},"end":{"line":136,"column":24,"index":3907}}],"key":"J79JGfKe/FiysxfBPf87zeBV7Ns="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _classCallCheck2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _NativeBlobModule = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[3], \"./NativeBlobModule\"));\n  var _invariant = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\")(_$$_REQUIRE(_dependencyMap[4], \"invariant\"));\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  function createBlobCollector(blobId) {\n    if (global.__blobCollectorProvider == null) {\n      return null;\n    } else {\n      return global.__blobCollectorProvider(blobId);\n    }\n  }\n  var BlobManager = function () {\n    function BlobManager() {\n      (0, _classCallCheck2.default)(this, BlobManager);\n    }\n    (0, _createClass2.default)(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        var blobId = uuidv4();\n        var items = parts.map(function (part) {\n          if (part instanceof ArrayBuffer || global.ArrayBufferView && part instanceof global.ArrayBufferView) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n          if (part instanceof _$$_REQUIRE(_dependencyMap[5], \"./Blob\")) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce(function (acc, curr) {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n        _NativeBlobModule.default.createFromParts(items, blobId);\n        return BlobManager.createFromOptions({\n          blobId: blobId,\n          offset: 0,\n          size: size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        _$$_REQUIRE(_dependencyMap[6], \"./BlobRegistry\").register(options.blobId);\n        return Object.assign(Object.create(_$$_REQUIRE(_dependencyMap[5], \"./Blob\").prototype), {\n          data: options.__collector == null ? Object.assign({}, options, {\n            __collector: createBlobCollector(options.blobId)\n          }) : options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _$$_REQUIRE(_dependencyMap[6], \"./BlobRegistry\").unregister(blobId);\n        if (_$$_REQUIRE(_dependencyMap[6], \"./BlobRegistry\").has(blobId)) {\n          return;\n        }\n        _NativeBlobModule.default.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n    return BlobManager;\n  }();\n  BlobManager.isAvailable = !!_NativeBlobModule.default;\n  module.exports = BlobManager;\n});","lineCount":110,"map":[[4,2,13,0],[5,2,14,0],[6,2,26,0],[6,11,26,9,"uuidv4"],[6,17,26,15],[6,20,26,26],[7,4,27,2],[7,11,27,9],[7,49,27,47],[7,50,27,48,"replace"],[7,57,27,55],[7,58,27,56],[7,65,27,63],[7,67,27,65],[7,77,27,65,"c"],[7,78,27,66],[7,80,27,70],[8,6,28,4],[8,10,28,10,"r"],[8,11,28,11],[8,14,28,15,"Math"],[8,18,28,19],[8,19,28,20,"random"],[8,25,28,26],[8,27,28,28],[8,30,28,31],[8,32,28,33],[8,35,28,37],[8,36,28,38],[9,8,29,6,"v"],[9,9,29,7],[9,12,29,10,"c"],[9,13,29,11],[9,17,29,15],[9,20,29,18],[9,23,29,21,"r"],[9,24,29,22],[9,27,29,26,"r"],[9,28,29,27],[9,31,29,30],[9,34,29,33],[9,37,29,37],[9,40,29,40],[10,6,30,4],[10,13,30,11,"v"],[10,14,30,12],[10,15,30,13,"toString"],[10,23,30,21],[10,24,30,22],[10,26,30,24],[10,27,30,25],[11,4,31,2],[11,5,31,3],[11,6,31,4],[12,2,32,0],[13,2,41,0],[13,11,41,9,"createBlobCollector"],[13,30,41,28],[13,31,41,29,"blobId"],[13,37,41,43],[13,39,41,67],[14,4,42,2],[14,8,42,6,"global"],[14,14,42,12],[14,15,42,13,"__blobCollectorProvider"],[14,38,42,36],[14,42,42,40],[14,46,42,44],[14,48,42,46],[15,6,43,4],[15,13,43,11],[15,17,43,15],[16,4,44,2],[16,5,44,3],[16,11,44,9],[17,6,45,4],[17,13,45,11,"global"],[17,19,45,17],[17,20,45,18,"__blobCollectorProvider"],[17,43,45,41],[17,44,45,42,"blobId"],[17,50,45,48],[17,51,45,49],[18,4,46,2],[19,2,47,0],[20,2,47,1],[20,6,52,6,"BlobManager"],[20,17,52,17],[21,4,52,17],[22,6,52,17],[23,4,52,17],[24,4,52,17],[25,6,52,17],[26,6,52,17],[26,13,61,2],[26,38,62,4,"parts"],[26,43,62,31],[26,45,63,4,"options"],[26,52,63,25],[26,54,64,10],[27,8,65,4],[27,12,65,4,"invariant"],[27,30,65,13],[27,32,65,14,"NativeBlobModule"],[27,57,65,30],[27,59,65,32],[27,91,65,64],[27,92,65,65],[28,8,67,4],[28,12,67,10,"blobId"],[28,18,67,16],[28,21,67,19,"uuidv4"],[28,27,67,25],[28,29,67,27],[29,8,68,4],[29,12,68,10,"items"],[29,17,68,15],[29,20,68,18,"parts"],[29,25,68,23],[29,26,68,24,"map"],[29,29,68,27],[29,30,68,28],[29,40,68,28,"part"],[29,44,68,32],[29,46,68,36],[30,10,69,6],[30,14,70,8,"part"],[30,18,70,12],[30,30,70,24,"ArrayBuffer"],[30,41,70,35],[30,45,71,9,"global"],[30,51,71,15],[30,52,71,16,"ArrayBufferView"],[30,67,71,31],[30,71,71,35,"part"],[30,75,71,39],[30,87,71,51,"global"],[30,93,71,57],[30,94,71,58,"ArrayBufferView"],[30,109,71,74],[30,111,72,8],[31,12,73,8],[31,18,73,14],[31,22,73,18,"Error"],[31,27,73,23],[31,28,74,10],[31,103,74,85],[31,104,75,9],[32,10,76,6],[33,10,77,6],[33,14,77,10,"part"],[33,18,77,14],[33,70,77,30],[33,72,77,32],[34,12,78,8],[34,19,78,15],[35,14,79,10,"data"],[35,18,79,14],[35,20,79,16,"part"],[35,24,79,20],[35,25,79,21,"data"],[35,29,79,25],[36,14,80,10,"type"],[36,18,80,14],[36,20,80,16],[37,12,81,8],[37,13,81,9],[38,10,82,6],[38,11,82,7],[38,17,82,13],[39,12,83,8],[39,19,83,15],[40,14,84,10,"data"],[40,18,84,14],[40,20,84,16,"String"],[40,26,84,22],[40,27,84,23,"part"],[40,31,84,27],[40,32,84,28],[41,14,85,10,"type"],[41,18,85,14],[41,20,85,16],[42,12,86,8],[42,13,86,9],[43,10,87,6],[44,8,88,4],[44,9,88,5],[44,10,88,6],[45,8,89,4],[45,12,89,10,"size"],[45,16,89,14],[45,19,89,17,"items"],[45,24,89,22],[45,25,89,23,"reduce"],[45,31,89,29],[45,32,89,30],[45,42,89,31,"acc"],[45,45,89,34],[45,47,89,36,"curr"],[45,51,89,40],[45,53,89,45],[46,10,90,6],[46,14,90,10,"curr"],[46,18,90,14],[46,19,90,15,"type"],[46,23,90,19],[46,28,90,24],[46,36,90,32],[46,38,90,34],[47,12,91,8],[47,19,91,15,"acc"],[47,22,91,18],[47,25,91,21,"global"],[47,31,91,27],[47,32,91,28,"unescape"],[47,40,91,36],[47,41,91,37,"encodeURI"],[47,50,91,46],[47,51,91,47,"curr"],[47,55,91,51],[47,56,91,52,"data"],[47,60,91,56],[47,61,91,57],[47,62,91,58],[47,63,91,59,"length"],[47,69,91,65],[48,10,92,6],[48,11,92,7],[48,17,92,13],[49,12,93,8],[49,19,93,15,"acc"],[49,22,93,18],[49,25,93,21,"curr"],[49,29,93,25],[49,30,93,26,"data"],[49,34,93,30],[49,35,93,31,"size"],[49,39,93,35],[50,10,94,6],[51,8,95,4],[51,9,95,5],[51,11,95,7],[51,12,95,8],[51,13,95,9],[52,8,97,4,"NativeBlobModule"],[52,33,97,20],[52,34,97,21,"createFromParts"],[52,49,97,36],[52,50,97,37,"items"],[52,55,97,42],[52,57,97,44,"blobId"],[52,63,97,50],[52,64,97,51],[53,8,99,4],[53,15,99,11,"BlobManager"],[53,26,99,22],[53,27,99,23,"createFromOptions"],[53,44,99,40],[53,45,99,41],[54,10,100,6,"blobId"],[54,16,100,12],[54,18,100,6,"blobId"],[54,24,100,12],[55,10,101,6,"offset"],[55,16,101,12],[55,18,101,14],[55,19,101,15],[56,10,102,6,"size"],[56,14,102,10],[56,16,102,6,"size"],[56,20,102,10],[57,10,103,6,"type"],[57,14,103,10],[57,16,103,12,"options"],[57,23,103,19],[57,26,103,22,"options"],[57,33,103,29],[57,34,103,30,"type"],[57,38,103,34],[57,41,103,37],[57,43,103,39],[58,10,104,6,"lastModified"],[58,22,104,18],[58,24,104,20,"options"],[58,31,104,27],[58,34,104,30,"options"],[58,41,104,37],[58,42,104,38,"lastModified"],[58,54,104,50],[58,57,104,53,"Date"],[58,61,104,57],[58,62,104,58,"now"],[58,65,104,61],[59,8,105,4],[59,9,105,5],[59,10,105,6],[60,6,106,2],[61,4,106,3],[62,6,106,3],[63,6,106,3],[63,13,112,2],[63,40,112,27,"options"],[63,47,112,44],[63,49,112,52],[64,8,113,4],[64,57,113,17,"register"],[64,65,113,25],[64,66,113,26,"options"],[64,73,113,33],[64,74,113,34,"blobId"],[64,80,113,40],[64,81,113,41],[65,8,115,4],[65,15,115,11,"Object"],[65,21,115,17],[65,22,115,18,"assign"],[65,28,115,24],[65,29,115,25,"Object"],[65,35,115,31],[65,36,115,32,"create"],[65,42,115,38],[65,43,115,39],[65,84,115,44,"prototype"],[65,93,115,53],[65,94,115,54],[65,96,115,56],[66,10,116,6,"data"],[66,14,116,10],[66,16,120,8,"options"],[66,23,120,15],[66,24,120,16,"__collector"],[66,35,120,27],[66,39,120,31],[66,43,120,35],[66,64,122,17,"options"],[66,71,122,24],[67,12,123,14,"__collector"],[67,23,123,25],[67,25,123,27,"createBlobCollector"],[67,44,123,46],[67,45,123,47,"options"],[67,52,123,54],[67,53,123,55,"blobId"],[67,59,123,61],[68,10,123,62],[68,15,125,12,"options"],[69,8,126,4],[69,9,126,5],[69,10,126,6],[70,6,127,2],[71,4,127,3],[72,6,127,3],[73,6,127,3],[73,13,132,2],[73,30,132,17,"blobId"],[73,36,132,31],[73,38,132,39],[74,8,133,4],[74,12,133,4,"invariant"],[74,30,133,13],[74,32,133,14,"NativeBlobModule"],[74,57,133,30],[74,59,133,32],[74,91,133,64],[74,92,133,65],[75,8,135,4],[75,57,135,17,"unregister"],[75,67,135,27],[75,68,135,28,"blobId"],[75,74,135,34],[75,75,135,35],[76,8,136,4],[76,12,136,8],[76,61,136,21,"has"],[76,64,136,24],[76,65,136,25,"blobId"],[76,71,136,31],[76,72,136,32],[76,74,136,34],[77,10,137,6],[78,8,138,4],[79,8,139,4,"NativeBlobModule"],[79,33,139,20],[79,34,139,21,"release"],[79,41,139,28],[79,42,139,29,"blobId"],[79,48,139,35],[79,49,139,36],[80,6,140,2],[81,4,140,3],[82,6,140,3],[83,6,140,3],[83,13,146,2],[83,45,146,38],[84,8,147,4],[84,12,147,4,"invariant"],[84,30,147,13],[84,32,147,14,"NativeBlobModule"],[84,57,147,30],[84,59,147,32],[84,91,147,64],[84,92,147,65],[85,8,149,4,"NativeBlobModule"],[85,33,149,20],[85,34,149,21,"addNetworkingHandler"],[85,54,149,41],[85,56,149,43],[86,6,150,2],[87,4,150,3],[88,6,150,3],[89,6,150,3],[89,13,156,2],[89,42,156,29,"socketId"],[89,50,156,45],[89,52,156,53],[90,8,157,4],[90,12,157,4,"invariant"],[90,30,157,13],[90,32,157,14,"NativeBlobModule"],[90,57,157,30],[90,59,157,32],[90,91,157,64],[90,92,157,65],[91,8,159,4,"NativeBlobModule"],[91,33,159,20],[91,34,159,21,"addWebSocketHandler"],[91,53,159,40],[91,54,159,41,"socketId"],[91,62,159,49],[91,63,159,50],[92,6,160,2],[93,4,160,3],[94,6,160,3],[95,6,160,3],[95,13,166,2],[95,45,166,32,"socketId"],[95,53,166,48],[95,55,166,56],[96,8,167,4],[96,12,167,4,"invariant"],[96,30,167,13],[96,32,167,14,"NativeBlobModule"],[96,57,167,30],[96,59,167,32],[96,91,167,64],[96,92,167,65],[97,8,169,4,"NativeBlobModule"],[97,33,169,20],[97,34,169,21,"removeWebSocketHandler"],[97,56,169,43],[97,57,169,44,"socketId"],[97,65,169,52],[97,66,169,53],[98,6,170,2],[99,4,170,3],[100,6,170,3],[101,6,170,3],[101,13,175,2],[101,37,175,24,"blob"],[101,41,175,34],[101,43,175,36,"socketId"],[101,51,175,52],[101,53,175,60],[102,8,176,4],[102,12,176,4,"invariant"],[102,30,176,13],[102,32,176,14,"NativeBlobModule"],[102,57,176,30],[102,59,176,32],[102,91,176,64],[102,92,176,65],[103,8,178,4,"NativeBlobModule"],[103,33,178,20],[103,34,178,21,"sendOverSocket"],[103,48,178,35],[103,49,178,36,"blob"],[103,53,178,40],[103,54,178,41,"data"],[103,58,178,45],[103,60,178,47,"socketId"],[103,68,178,55],[103,69,178,56],[104,6,179,2],[105,4,179,3],[106,4,179,3],[107,2,179,3],[108,2,52,6,"BlobManager"],[108,13,52,17],[108,14,56,9,"isAvailable"],[108,25,56,20],[108,28,56,32],[108,29,56,33],[108,30,56,34,"NativeBlobModule"],[108,55,56,50],[109,2,182,0,"module"],[109,8,182,6],[109,9,182,7,"exports"],[109,16,182,14],[109,19,182,17,"BlobManager"],[109,30,182,28],[110,0,182,29]],"functionMap":{"names":["<global>","uuidv4","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","createBlobCollector","BlobManager","createFromParts","parts.map$argument_0","items.reduce$argument_0","createFromOptions","release","addNetworkingHandler","addWebSocketHandler","removeWebSocketHandler","sendOverSocket"],"mappings":"AAA;ACyB;iECC;GDI;CDC;AGS;CHM;AIK;ECS;4BCO;KDoB;8BEC;KFM;GDW;EIM;GJe;EKK;GLQ;EMM;GNI;EOM;GPI;EQM;GRI;ESK;GTI;CJC"}},"type":"js/module"}]}